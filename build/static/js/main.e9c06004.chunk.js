(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,a){e.exports=a.p+"static/media/logo.67f772fd.svg"},36:function(e,t,a){e.exports=a(69)},46:function(e,t,a){},48:function(e,t,a){},50:function(e,t,a){},52:function(e,t,a){},55:function(e,t,a){},57:function(e,t,a){},59:function(e,t,a){},63:function(e,t,a){},67:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(12),r=a.n(c),o=a(6),i=a(34),s=a(13),u=function(e){var t=e.children,a=e.path,n=e.classNames,c=void 0===n?"":n;return l.a.createElement(s.b,{to:a,className:c},t)},d=function(){return l.a.createElement("header",{className:"bg-primary"},l.a.createElement("nav",{className:"container navbar justify-content-lg-start"},l.a.createElement(u,{path:"/",classNames:"nav-link nav-item text-white"},"\u0421\u0442\u043e\u043b\u044b"),l.a.createElement(u,{path:"/total",classNames:"nav-link nav-item text-white"},"\u0418\u0442\u043e\u0433 \u0434\u043d\u044f")))},m=a(1),b=l.a.createContext(),p=(a(46),function(){var e=Object(n.useContext)(b).tables;return l.a.createElement("section",{className:"tablesPage"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},e.map(function(e){return l.a.createElement("div",{key:e.id,className:"col-6 col-md-4 col-lg-3"},l.a.createElement(u,{classNames:"card py-4 tablesPage-item",path:"single/".concat(e.id)},l.a.createElement("h2",{className:"text-center text-dark"},e.name)))}))))}),E=function(e,t,a){return{type:"PRODUCT_ADDED_TO_CHEQUE",productId:e,tableId:t,productCount:a}},f=function(e,t){return{type:"TOGLED_MODAL_DESCRIPTION",tableId:e,productId:t}},v=function(){return l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"512",height:"512",x:"0",y:"0",viewBox:"0 0 511.992 511.992",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve"},l.a.createElement("g",null,l.a.createElement("path",{xmlns:"http://www.w3.org/2000/svg",d:"m415.402344 495.421875-159.40625-159.410156-159.40625 159.410156c-22.097656 22.09375-57.921875 22.09375-80.019532 0-22.09375-22.097656-22.09375-57.921875 0-80.019531l159.410157-159.40625-159.410157-159.40625c-22.09375-22.097656-22.09375-57.921875 0-80.019532 22.097657-22.09375 57.921876-22.09375 80.019532 0l159.40625 159.410157 159.40625-159.410157c22.097656-22.09375 57.921875-22.09375 80.019531 0 22.09375 22.097657 22.09375 57.921876 0 80.019532l-159.410156 159.40625 159.410156 159.40625c22.09375 22.097656 22.09375 57.921875 0 80.019531-22.097656 22.09375-57.921875 22.09375-80.019531 0zm0 0",fill:"#ff2d00","data-original":"#e76e54"})))},h=function(e){var t=e.title,a=e.count,n=e.total,c=e.id,r=e.tableId,o=e.productAddedToCheque,i=e.togledModalDescription;return l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-5 tableList-title",onClick:function(){i(r,c)}},t),l.a.createElement("div",{className:"col-4"},l.a.createElement("input",{type:"number",value:a,onChange:function(e){return o(c,r,e.target.value)}})),l.a.createElement("div",{className:"col-3"},"".concat(n," \u0440\u0443\u0431")),l.a.createElement("div",{className:"delete",onClick:function(){return o(c,r,0)}},l.a.createElement(v,null)))},g={productAddedToCheque:E,togledModalDescription:f},O=Object(o.b)(null,g)(function(e){var t=e.list,a=e.id,n=e.productAddedToCheque,c=e.togledModalDescription;return l.a.createElement("div",{className:"tablePage-cheque-list"},l.a.createElement("div",{className:"row tablePage-cheque-list-head"},l.a.createElement("div",{className:"col-5"},l.a.createElement("h6",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435")),l.a.createElement("div",{className:"col-4"},l.a.createElement("h6",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e")),l.a.createElement("div",{className:"col-3"},l.a.createElement("h6",null,"\u0418\u0442\u043e\u0433\u043e"))),t.map(function(e){return l.a.createElement(h,{title:e.title,count:e.count,total:e.total,id:e.ID,key:e.ID,tableId:a,description:e.description,productAddedToCheque:n,togledModalDescription:c})}))}),N={SaleChanged:function(e,t){return{type:"SALE_CHANGED",tableId:t,sale:e}}},w=Object(o.b)(void 0,N)(function(e){var t=e.subtotal,a=e.sale,n=e.total,c=e.id,r=e.SaleChanged;return l.a.createElement("table",{className:"tablePage-cheque-total table"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u041f\u043e\u0434\u044b\u0442\u043e\u0433"),l.a.createElement("td",null,"".concat(t," \u0440\u0443\u0431"))),l.a.createElement("tr",null,l.a.createElement("th",null,"\u0421\u043a\u0438\u0434\u043a\u0430 %"),l.a.createElement("td",null,l.a.createElement("input",{type:"number",value:a,onChange:function(e){r(e.target.value,c)}}))),l.a.createElement("tr",null,l.a.createElement("th",null,"\u0418\u0442\u043e\u0433\u043e"),l.a.createElement("td",null,"".concat(n," \u0440\u0443\u0431")))))}),j=a(11),I=a(8),D=a(28),x=a.n(D),y=function(e){var t=e.item,a=t.title,n=t.count,c=t.total,r=t.description;return l.a.createElement("li",null,l.a.createElement("div",null,"".concat(a," - ").concat(n," \u0448\u0442, ").concat(c," \u0440\u0443\u0431")),r?l.a.createElement("div",null,r):null)},C=function(e){var t=e.table,a=t.name,n=t.list,c=t.subtotal,r=t.sale,o=t.total;return l.a.createElement("div",{className:"chequeToPrint"},l.a.createElement("img",{src:x.a,className:"chequeToPrint-logo",alt:"jazzCafe"}),l.a.createElement("ul",null,n.map(function(e){return l.a.createElement(y,{item:e,key:e.ID})})),l.a.createElement("div",{className:"chequeToPrint-title"},"\u0421\u0442\u043e\u043b: ",a),l.a.createElement("div",{className:"chequeToPrint-subtotal"},"\u041f\u043e\u0434\u044b\u0442\u043e\u0433: ",c),l.a.createElement("div",{className:"chequeToPrint-sale"},"\u0421\u043a\u0438\u0434\u043a\u0430: ",r),l.a.createElement("div",{className:"chequeToPrint-total"},"\u0418\u0442\u043e\u0433: ",o),l.a.createElement("div",{className:"chequeToPrint-total"},"\u0414\u0430\u0442\u0430: ",(new Date).toLocaleDateString()))},P=function(e){return+(Math.round(e+"e+2")+"e-2")},k=function(e){var t=e.tables,a=e.total;return window.sessionStorage.setItem("tables",JSON.stringify(t)),window.sessionStorage.setItem("total",a),e},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.sale,a=(100-t)/100,n=P(e.subtotal*a);return e.sale=t,e.total=n,e},A=function(e,t,a){var n=e.products,l=e.tables,c=a.productId,r=a.productCount,o=a.description,i=a.tableId,s=l[t],u=s.list.findIndex(function(e){return+e.ID===+c}),d=function(e,t,a){return t.count<=0?Object(I.a)({},e,{list:[].concat(Object(j.a)(e.list.slice(0,a)),Object(j.a)(e.list.slice(a+1)))}):a<0?Object(I.a)({},e,{list:[].concat(Object(j.a)(e.list),[t])}):Object(I.a)({},e,{list:[].concat(Object(j.a)(e.list.slice(0,a)),[t],Object(j.a)(e.list.slice(a+1)))})}(s,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0;if(void 0!==l)return Object(I.a)({},t,{description:l});var c=t.id,r=void 0===c?a.ID:c,o=t.title,i=void 0===o?a.title:o,s=t.count,u=void 0===s?0:s,d=t.description,m=void 0===d?void 0:d;void 0===n?u+=1:u=n;var b="pickup-table"!==e?a.price:a.price_sale||a.price;return{ID:r,title:i,count:u,total:P(u*b),description:m}}(i,s.list[u],function(e,t){for(var a,n=0,l=Object.keys(e);n<l.length;n++)if(a=e[l[n]].find(function(e){return+e.ID===+t}))return a}(n,c),r,o),u);return d=function(e){var t=0;return e.list.forEach(function(e){t+=e.total}),Object(I.a)({},e,{subtotal:P(t)})}(d),d=T(d)},L=function(e,t,a){return[].concat(Object(j.a)(e.slice(0,a)),[t],Object(j.a)(e.slice(a+1)))},S=function(e){var t=window.open("","","left=50,top=50,width=800,height=640,toolbar=0,scrollbars=1,status=0");t.document.write("\n          <style>\n            *{\n              font-size: 20px;\n              line-height: 1.8;\n            }\n            img {\n            display: block;\n            margin: 0 auto;\n            }\n            ul{\n                border-bottom: 2px solid #c4c4c4;\n                border-top: 2px solid #c4c4c4;\n                padding: 30px 20px 30px 50px;\n                margin: 30px 0;\n            }\n        </style>"),t.document.write('<div id="root" ></div>'),r.a.render(l.a.createElement(C,{table:e}),t.document.getElementById("root")),t.focus(),t.print(),t.close()},_=function(e){return function(t){var a=Object(m.f)().id,c=Object(n.useContext)(b).tables.find(function(e){return e.id===a});return l.a.createElement(e,Object.assign({},c,t))}},q={closedTable:function(e){return{type:"CLOSED_TABLE",tableId:e}}},M=Object(o.b)(void 0,q)(_(function(e){var t=e.id,a=e.closedTable;return l.a.createElement("div",{className:"row tablePage-cheque-btns"},l.a.createElement("div",{className:"col-6"},l.a.createElement("button",{className:"btn btn-secondary w-100",onClick:function(){return S(e)}},"\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c")),l.a.createElement("div",{className:"col-6"},l.a.createElement("button",{className:"btn btn-primary w-100",onClick:function(){return a(t)}},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0441\u0442\u043e\u043b")))})),R=(a(48),_(function(e){var t=e.total,a=e.sale,n=e.subtotal,c=e.id,r=e.list;return l.a.createElement("div",{className:"tablePage-cheque d-flex flex-column justify-content-between"},l.a.createElement(O,{list:r,id:c}),l.a.createElement(w,{subtotal:n,sale:a,total:t,id:c}),l.a.createElement(M,{id:c}))})),B=function(e){var t=e.title,a=Object(m.g)().url;return l.a.createElement("div",{className:"col-12 col-md-6 col-lg-4"},l.a.createElement(s.b,{to:"".concat(a,"/").concat(t),replace:!0,className:"btn btn-info mb-3 w-100"},t))},U=function(){var e=Object(n.useContext)(b).products;return l.a.createElement("div",{className:"row productList-nav align-content-start"},Object.keys(e).map(function(e,t){return l.a.createElement(B,{title:e,key:t})}))},H=function(e){var t=e.product;return l.a.createElement("div",{className:"col-6 col-md-4"},l.a.createElement("div",{className:"productList-item card mb-3 p-1 d-flex flex-column"},l.a.createElement("h6",{className:"productItem-title card-title text-center mt-2 flex-grow-1"},t.title),l.a.createElement("button",{"data-id":t.ID,className:"btn btn-primary w-100"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")))},G={productAddedToCheque:E},z=Object(o.b)(function(e){return{products:e.products}},G)(function(e){var t=e.products,a=e.productAddedToCheque,n=Object(m.g)().path,c=Object(m.f)().id;return l.a.createElement("div",{className:"row productList-tab",onClick:function(e){return function(e,t,a){var n=e.target;"BUTTON"===n.tagName&&a(n.dataset.id,t)}(e,c,a)}},l.a.createElement(m.c,null,Object.keys(t).map(function(e,a){return l.a.createElement(m.a,{path:"".concat(n,"/").concat(e),key:"cat-".concat(a)},t[e].map(function(e){return l.a.createElement(H,{product:e,key:e.ID})}))})))}),J=(a(50),function(){return l.a.createElement("div",{className:"productList d-flex flex-column"},l.a.createElement(U,null),l.a.createElement(z,null))}),F=a(72),Q=(a(52),{togledModalDescription:f,changedProductDescription:function(e,t,a){return{type:"CHANGED_PRODUCT_DESCRIPTION",tableId:e,productId:t,description:a}}}),W=Object(o.b)(function(e){return{descriptionParams:e.descriptionParams,tables:e.tables}},Q)(function(e){var t,a=e.descriptionParams,n=e.tables,c=e.changedProductDescription,r=e.togledModalDescription,o=a.isOpen,i=a.tableId,s=a.productId,u=n.find(function(e){return e.id===i});return u&&(t=u.list.find(function(e){return e.ID===s}).description),l.a.createElement(F.a,{onHide:r,show:o},l.a.createElement(F.a.Header,null,l.a.createElement(F.a.Title,null,"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043a \u043f\u043e\u0437\u0438\u0446\u0438\u0438")),l.a.createElement(F.a.Body,null,l.a.createElement("textarea",{name:"description",value:t,onChange:function(e){c(i,s,e.target.value)}})),l.a.createElement(F.a.Footer,null,l.a.createElement("button",{className:"btn btn-primary",onClick:r},"ok")))}),X=(a(55),function(){var e=Object(m.f)().id;return l.a.createElement(l.a.Fragment,null,l.a.createElement("section",{className:"singlePage"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-lg-5"},l.a.createElement(R,{id:e})),l.a.createElement("div",{className:"col-12 col-lg-7"},l.a.createElement(J,null))))),l.a.createElement(W,null))}),Y=(a(57),Object(o.b)(function(e){return{total:e.total}})(function(e){var t=e.total;return l.a.createElement("section",{className:"totalPage"},l.a.createElement("div",{className:"container"},l.a.createElement("h3",null,(new Date).toLocaleDateString()),l.a.createElement("h1",null,"".concat(t," \u0440\u0443\u0431"))))})),K=function(){return l.a.createElement("main",{className:"App"},l.a.createElement(m.c,null,l.a.createElement(m.a,{path:"/",exact:!0},l.a.createElement(p,null)),l.a.createElement(m.a,{path:"/single/:id"},l.a.createElement(X,null)),l.a.createElement(m.a,{path:"/total"},l.a.createElement(Y,null))))},V=(a(59),function(){return l.a.createElement("div",{className:"spinnerWrap"},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:{margin:"auto",background:"none",display:"block",shapeRendering:"auto"},width:"100px",height:"100px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},l.a.createElement("path",{d:"M18 50A32 32 0 0 0 82 50A32 33.2 0 0 1 18 50",fill:"#292664",stroke:"none",transform:"rotate(269.75 50 50.6)"},l.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:"0.78125s",repeatCount:"indefinite",keyTimes:"0;1",values:"0 50 50.6;360 50 50.6"}))))}),Z=a(24),$=a.n(Z),ee=a(30),te=a(18),ae=function e(){Object(te.a)(this,e),this.getProducts=Object(ee.a)($.a.mark(function e(){var t;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(window.location.origin,"/products.json"));case 2:if(!(t=e.sent).ok){e.next=9;break}return e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:new Error("Can't fetch products");case 10:case"end":return e.stop()}},e)}))};var ne={productsLoaded:function(e){return{type:"PRODUCTS_LOADED",payload:e}}},le=Object(o.b)(function(e){return e},ne)(function(e){var t=e.loading,a=e.productsLoaded,c=Object(i.a)(e,["loading","productsLoaded"]),r=(new ae).getProducts;return Object(n.useEffect)(function(){r().then(function(e){a(e)})},[]),t?l.a.createElement(V,null):l.a.createElement(s.a,null,l.a.createElement(d,null),l.a.createElement(b.Provider,{value:c},l.a.createElement(K,null)))}),ce=a(31),re=a(33),oe=a(32),ie=a(35),se=(a(63),function(){return l.a.createElement("div",{className:"errorIndicator"},l.a.createElement("h2",{className:"text-danger"},"\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430, \u0441\u043a\u043e\u0440\u0435\u0435 \u0437\u0432\u043e\u043d\u0438\u0442\u0435 \u043c\u043d\u0435!!!"))}),ue=function(e){function t(){var e,a;Object(te.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(re.a)(this,(e=Object(oe.a)(t)).call.apply(e,[this].concat(l)))).state={hasError:!1},a}return Object(ie.a)(t,e),Object(ce.a)(t,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?l.a.createElement(se,null):this.props.children}}]),t}(n.Component),de=a(17),me=JSON.parse(window.sessionStorage.getItem("tables"))||[{id:"table-1",name:"\u0421\u0442\u043e\u043b 1",list:[],subtotal:0,sale:0,total:0},{id:"table-2",name:"\u0421\u0442\u043e\u043b 2",list:[],subtotal:0,sale:0,total:0},{id:"table-3",name:"\u0421\u0442\u043e\u043b 3",list:[],subtotal:0,sale:0,total:0},{id:"table-4",name:"\u0421\u0442\u043e\u043b 4",list:[],subtotal:0,sale:0,total:0},{id:"table-5",name:"\u0421\u0442\u043e\u043b 5",list:[],subtotal:0,sale:0,total:0},{id:"table-6",name:"\u0421\u0442\u043e\u043b 6",list:[],subtotal:0,sale:0,total:0},{id:"table-7",name:"\u0421\u0442\u043e\u043b 7",list:[],subtotal:0,sale:0,total:0},{id:"table-8",name:"\u0421\u0442\u043e\u043b 8",list:[],subtotal:0,sale:0,total:0},{id:"table-9",name:"\u0421\u0442\u043e\u043b 9",list:[],subtotal:0,sale:0,total:0},{id:"table-10",name:"\u0421\u0442\u043e\u043b 10",list:[],subtotal:0,sale:0,total:0},{id:"table-11",name:"\u0421\u0442\u043e\u043b 11",list:[],subtotal:0,sale:0,total:0},{id:"table-12",name:"\u0421\u0442\u043e\u043b 12",list:[],subtotal:0,sale:0,total:0},{id:"table-13",name:"\u0421\u0442\u043e\u043b 13",list:[],subtotal:0,sale:0,total:0},{id:"table-14",name:"\u0421\u0442\u043e\u043b 14",list:[],subtotal:0,sale:0,total:0},{id:"pickup-table",name:"\u0421\u0430\u043c\u043e\u0432\u044b\u0432\u043e\u0437",list:[],subtotal:0,sale:0,total:0}],be={loading:!0,products:[],total:window.sessionStorage.getItem("total")||0,tables:me,descriptionParams:{isOpen:!1,tableId:null,productId:null}},pe=function(){var e,t,a,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,l=arguments.length>1?arguments[1]:void 0;switch(l.type){case"PRODUCTS_LOADED":var c=function(e){var t,a=Object(j.a)(e),n={};return a.forEach(function(e){e.cat&&(t=e.cat),e.cat=e.cat?e.cat:t,e.price&&(n[e.cat]=n[e.cat]||[],n[e.cat].push(e))}),n}(l.payload);return Object(I.a)({},n,{products:c,loading:!1});case"SALE_CHANGED":return e=n.tables.findIndex(function(e){return e.id===l.tableId}),t=T(n.tables[e],l.sale),a=L(n.tables,t,e),k(Object(I.a)({},n,{tables:a}));case"PRODUCT_ADDED_TO_CHEQUE":return e=n.tables.findIndex(function(e){return e.id===l.tableId}),t=A(n,e,l),a=L(n.tables,t,e),k(Object(I.a)({},n,{tables:a}));case"TOGLED_MODAL_DESCRIPTION":return function(e,t){var a=t.tableId,n=void 0===a?null:a,l=t.productId,c=void 0===l?null:l;return Object(I.a)({},e,{descriptionParams:Object(I.a)({},e.descriptionParams,{isOpen:!e.descriptionParams.isOpen,tableId:n,productId:c})})}(n,l);case"CHANGED_PRODUCT_DESCRIPTION":return e=n.tables.findIndex(function(e){return e.id===l.tableId}),t=A(n,e,l),a=L(n.tables,t,e),k(Object(I.a)({},n,{tables:a}));case"CLOSED_TABLE":return k(function(e,t){var a=e.tables,n=a.findIndex(function(e){return e.id===t}),l=+e.total+ +a[n].total;S(a[n]);var c={id:a[n].id,name:a[n].name,list:[],subtotal:0,sale:0,total:0};return Object(I.a)({},e,{tables:[].concat(Object(j.a)(e.tables.slice(0,n)),[c],Object(j.a)(e.tables.slice(n+1))),total:l})}(n,l.tableId));default:return n}},Ee=Object(de.b)(pe);a(65),a(67);r.a.render(l.a.createElement(o.a,{store:Ee},l.a.createElement(ue,null,l.a.createElement(le,null))),document.getElementById("root"))}},[[36,2,1]]]);
//# sourceMappingURL=main.e9c06004.chunk.js.map